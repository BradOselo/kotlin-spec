File: kt1189.kt - 20802ad14d25b66619fbd35f61491eab
  NL("\n")
  NL("\n")
  packageHeader
    PACKAGE("package")
    identifier
      simpleIdentifier
        Identifier("kt1189")
    semi
      NL("\n")
  importList
    importHeader
      IMPORT("import")
      identifier
        simpleIdentifier
          Identifier("java")
        DOT(".")
        simpleIdentifier
          Identifier("util")
        DOT(".")
        simpleIdentifier
          Identifier("concurrent")
        DOT(".")
        simpleIdentifier
          Identifier("locks")
        DOT(".")
        simpleIdentifier
          Identifier("ReentrantReadWriteLock")
      semi
        NL("\n")
        NL("\n")
  topLevelObject
    declaration
      functionDeclaration
        modifiers
          modifier
            functionModifier
              INLINE("inline")
        FUN("fun")
        typeParameters
          LANGLE("<")
          typeParameter
            simpleIdentifier
              Identifier("T")
          RANGLE(">")
        receiverType
          typeReference
            userType
              simpleUserType
                simpleIdentifier
                  Identifier("ReentrantReadWriteLock")
        DOT(".")
        simpleIdentifier
          Identifier("write")
        functionValueParameters
          LPAREN("(")
          functionValueParameter
            parameter
              simpleIdentifier
                Identifier("action")
              COLON(":")
              type
                functionType
                  functionTypeParameters
                    LPAREN("(")
                    RPAREN(")")
                  ARROW("->")
                  type
                    typeReference
                      userType
                        simpleUserType
                          simpleIdentifier
                            Identifier("T")
          RPAREN(")")
        COLON(":")
        type
          typeReference
            userType
              simpleUserType
                simpleIdentifier
                  Identifier("T")
        functionBody
          block
            LCURL("{")
            NL("\n")
            statements
              statement
                declaration
                  propertyDeclaration
                    VAL("val")
                    variableDeclaration
                      simpleIdentifier
                        Identifier("rl")
                    ASSIGNMENT("=")
                    expression
                      expression
                        simpleIdentifier
                          Identifier("readLock")
                      unarySuffix
                        callSuffix
                          valueArguments
                            LPAREN("(")
                            RPAREN(")")
              semis
                NL("\n")
              statement
                declaration
                  propertyDeclaration
                    VAR("var")
                    variableDeclaration
                      simpleIdentifier
                        Identifier("readCount")
                    ASSIGNMENT("=")
                    expression
                      literalConstant
                        IntegerLiteral("0")
              semis
                NL("\n")
              statement
                declaration
                  propertyDeclaration
                    VAL("val")
                    variableDeclaration
                      simpleIdentifier
                        Identifier("writeCount")
                    ASSIGNMENT("=")
                    expression
                      expression
                        simpleIdentifier
                          Identifier("getWriteHoldCount")
                      unarySuffix
                        callSuffix
                          valueArguments
                            LPAREN("(")
                            RPAREN(")")
              semis
                NL("\n")
              statement
                expression
                  ifExpression
                    IF("if")
                    LPAREN("(")
                    expression
                      expression
                        simpleIdentifier
                          Identifier("writeCount")
                      equalityOperator
                        EQEQ("==")
                      expression
                        literalConstant
                          IntegerLiteral("0")
                    RPAREN(")")
                    controlStructureBody
                      block
                        LCURL("{")
                        NL("\n")
                        statements
                          statement
                            assignment
                              directlyAssignableExpression
                                simpleIdentifier
                                  Identifier("readCount")
                              ASSIGNMENT("=")
                              expression
                                expression
                                  simpleIdentifier
                                    Identifier("getReadHoldCount")
                                unarySuffix
                                  callSuffix
                                    valueArguments
                                      LPAREN("(")
                                      RPAREN(")")
                          semis
                            NL("\n")
                          statement
                            expression
                              ifExpression
                                IF("if")
                                LPAREN("(")
                                expression
                                  expression
                                    simpleIdentifier
                                      Identifier("readCount")
                                  comparisonOperator
                                    RANGLE(">")
                                  expression
                                    literalConstant
                                      IntegerLiteral("0")
                                RPAREN(")")
                                NL("\n")
                                controlStructureBody
                                  statement
                                    loopStatement
                                      forStatement
                                        FOR("for")
                                        LPAREN("(")
                                        variableDeclaration
                                          simpleIdentifier
                                            Identifier("i")
                                        IN("in")
                                        expression
                                          expression
                                            literalConstant
                                              IntegerLiteral("1")
                                          RANGE("..")
                                          expression
                                            simpleIdentifier
                                              Identifier("readCount")
                                        RPAREN(")")
                                        NL("\n")
                                        controlStructureBody
                                          statement
                                            expression
                                              expression
                                                simpleIdentifier
                                                  Identifier("rl")
                                              unarySuffix
                                                navigationSuffix
                                                  memberAccessOperator
                                                    DOT(".")
                                                  simpleIdentifier
                                                    Identifier("unlock")
                                              unarySuffix
                                                callSuffix
                                                  valueArguments
                                                    LPAREN("(")
                                                    RPAREN(")")
                          semis
                            NL("\n")
                        RCURL("}")
              semis
                NL("\n")
                NL("\n")
              statement
                declaration
                  propertyDeclaration
                    VAL("val")
                    variableDeclaration
                      simpleIdentifier
                        Identifier("wl")
                    ASSIGNMENT("=")
                    expression
                      expression
                        simpleIdentifier
                          Identifier("writeLock")
                      unarySuffix
                        callSuffix
                          valueArguments
                            LPAREN("(")
                            RPAREN(")")
              semis
                NL("\n")
              statement
                expression
                  expression
                    simpleIdentifier
                      Identifier("wl")
                  unarySuffix
                    navigationSuffix
                      memberAccessOperator
                        DOT(".")
                      simpleIdentifier
                        Identifier("lock")
                  unarySuffix
                    callSuffix
                      valueArguments
                        LPAREN("(")
                        RPAREN(")")
              semis
                NL("\n")
              statement
                expression
                  tryExpression
                    TRY("try")
                    block
                      LCURL("{")
                      NL("\n")
                      statements
                        statement
                          expression
                            jumpExpression
                              RETURN("return")
                              expression
                                expression
                                  simpleIdentifier
                                    Identifier("action")
                                unarySuffix
                                  callSuffix
                                    valueArguments
                                      LPAREN("(")
                                      RPAREN(")")
                        semis
                          NL("\n")
                      RCURL("}")
                    NL("\n")
                    finallyBlock
                      FINALLY("finally")
                      block
                        LCURL("{")
                        NL("\n")
                        statements
                          statement
                            expression
                              ifExpression
                                IF("if")
                                LPAREN("(")
                                expression
                                  expression
                                    simpleIdentifier
                                      Identifier("readCount")
                                  comparisonOperator
                                    RANGLE(">")
                                  expression
                                    literalConstant
                                      IntegerLiteral("0")
                                RPAREN(")")
                                controlStructureBody
                                  block
                                    LCURL("{")
                                    NL("\n")
                                    statements
                                      statement
                                        loopStatement
                                          forStatement
                                            FOR("for")
                                            LPAREN("(")
                                            variableDeclaration
                                              simpleIdentifier
                                                Identifier("j")
                                            IN("in")
                                            expression
                                              expression
                                                literalConstant
                                                  IntegerLiteral("1")
                                              RANGE("..")
                                              expression
                                                simpleIdentifier
                                                  Identifier("readCount")
                                            RPAREN(")")
                                            controlStructureBody
                                              block
                                                LCURL("{")
                                                NL("\n")
                                                statements
                                                  statement
                                                    expression
                                                      expression
                                                        simpleIdentifier
                                                          Identifier("rl")
                                                      unarySuffix
                                                        navigationSuffix
                                                          memberAccessOperator
                                                            DOT(".")
                                                          simpleIdentifier
                                                            Identifier("lock")
                                                      unarySuffix
                                                        callSuffix
                                                          valueArguments
                                                            LPAREN("(")
                                                            RPAREN(")")
                                                  semis
                                                    NL("\n")
                                                RCURL("}")
                                      semis
                                        NL("\n")
                                    RCURL("}")
                          semis
                            NL("\n")
                          statement
                            expression
                              expression
                                simpleIdentifier
                                  Identifier("wl")
                              unarySuffix
                                navigationSuffix
                                  memberAccessOperator
                                    DOT(".")
                                  simpleIdentifier
                                    Identifier("unlock")
                              unarySuffix
                                callSuffix
                                  valueArguments
                                    LPAREN("(")
                                    RPAREN(")")
                          semis
                            NL("\n")
                        RCURL("}")
              semis
                NL("\n")
            RCURL("}")
    semis
      NL("\n")
      NL("\n")
  topLevelObject
    declaration
      functionDeclaration
        FUN("fun")
        simpleIdentifier
          Identifier("foo")
        functionValueParameters
          LPAREN("(")
          RPAREN(")")
        functionBody
          block
            LCURL("{")
            NL("\n")
            statements
              statement
                expression
                  tryExpression
                    TRY("try")
                    block
                      LCURL("{")
                      NL("\n")
                      statements
                        statement
                          expression
                            jumpExpression
                              RETURN("return")
                        semis
                          NL("\n")
                      RCURL("}")
                    NL("\n")
                    finallyBlock
                      FINALLY("finally")
                      block
                        LCURL("{")
                        NL("\n")
                        statements
                          statement
                            loopStatement
                              forStatement
                                FOR("for")
                                LPAREN("(")
                                variableDeclaration
                                  simpleIdentifier
                                    Identifier("i")
                                IN("in")
                                expression
                                  expression
                                    literalConstant
                                      IntegerLiteral("1")
                                  RANGE("..")
                                  expression
                                    literalConstant
                                      IntegerLiteral("10")
                                RPAREN(")")
                                controlStructureBody
                                  block
                                    LCURL("{")
                                    statements
                                    RCURL("}")
                          semis
                            NL("\n")
                        RCURL("}")
              semis
                NL("\n")
            RCURL("}")
    semis
      NL("\n")
  EOF("<EOF>")
