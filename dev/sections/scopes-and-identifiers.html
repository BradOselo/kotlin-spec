<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Kotlin language specification</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../resources/css/main.css">
  <script src="../resources/js/katex/katex.min.js"></script><script src="../resources/js/katex/contrib/auto-render.min.js"></script><script>document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body);
  });</script><link rel="stylesheet" href="../resources/js/katex/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script data-main="resources/js/main" src="https://requirejs.org/docs/release/2.3.6/minified/require.js"></script>
  <script>
      requirejs.config({
          waitSeconds: 10000
      });
  </script>
</head>
<body>
<header>
<h1 class="title">Kotlin language specification</h1>
</header>


























<h2 id="scopes-and-identifiers">Scopes and identifiers</h2>
<div class="paragraph">
<p><span class="sentence">All the program code in Kotlin is logically divided into <em>scopes</em>. </span><span class="sentence">A scope is a syntactically-delimited region of code that constitutes a context in which entities and their names can be introduced. </span><span class="sentence">Scopes are nested, with entities introduced in outer scopes also available in the inner scopes. </span><span class="sentence">The top level of a Kotlin file is also a scope, containing all the scopes within the file.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">All the scopes are divided into two categories: declaration scopes and statement scopes. </span><span class="sentence">These two kinds of scopes differ in how the identifiers in code refer to the values defined in the scopes.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">Declaration scopes include:</span></p>
</div>
<ul>
<li><span class="sentence">The project <a href="packages-and-imports.html#modules">modules</a>;</span></li>
<li><span class="sentence">The project <a href="packages-and-imports.html#packages-and-imports">packages</a>;</span></li>
<li><span class="sentence">The top level scope of a normal Kotlin file (not script file);</span></li>
<li><span class="sentence">The bodies of <a href="declarations.html#classifier-declaration">classifier declarations</a>;</span></li>
<li><span class="sentence">The bodies of <a href="expressions.html#object-literals">object literals</a>;</span></li>
<li><div class="TODO">
<span class="sentence">TODO(Anything else?)</span>
</div></li>
</ul>
<div class="paragraph">
<p><span class="sentence">Statement scopes include:</span></p>
</div>
<ul>
<li><span class="sentence">The top level scope of a Kotlin script file;</span></li>
<li><span class="sentence">Various scopes produced by control structure bodies of different <a href="control--and-data-flow-analysis.html#expressions-1">expressions</a>;</span></li>
<li><span class="sentence">The bodies of <a href="declarations.html#function-declaration">function declarations</a>;</span></li>
<li><span class="sentence">The bodies of <a href="expressions.html#anonymous-function-declarations">anonymous function literals</a>;</span></li>
<li><span class="sentence">The bodies of getters and setters of <a href="declarations.html#property-declaration">properties</a>;</span></li>
<li><span class="sentence">The bodies of <a href="declarations.html#constructor-declaration">constructors</a>;</span></li>
<li><span class="sentence">The bodies of instance initialization blocks in <a href="declarations.html#class-declaration">class declarations</a>;</span></li>
<li><div class="TODO">
<span class="sentence">TODO(Anything else?)</span>
</div></li>
</ul>
<div class="paragraph">
<p><span class="sentence">All the declarations in a particular scope introduce new <em>bindings</em> of identifiers in this scope to their respective entities in the program. </span><span class="sentence">These entities may be types or values, where values may refer to objects, functions or properties (that may be delegated). </span><span class="sentence">Top-level scopes additionally allow to introduce such bindings using <a href="packages-and-imports.html#packages-and-imports"><code>import</code> directive</a> from other top-level scopes.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">In most situations, it is not allowed to bind several values to the same identifier in the same scope, but it is allowed to bind a value to an identifier already available in the scope through outer scopes or imports. </span><span class="sentence">An exception to this rule are function declarations, that, in addition to identifier bound to, also may differ by <a href="declarations.html#function-signature">signature</a> and allow defining several functions with the same name in the same scope. </span><span class="sentence">When <a href="expressions.html#call-and-property-access-expressions">calling functions</a> a process called <a href="overload-resolution.html#overload-resolution">overloading resolution</a> takes places that allows differentiating such functions. </span><span class="sentence">Overloading resolution also applies to properties if they are used as functions through <code>invoke</code>-convention, but it does not mean several properties with the same name may be defined in the same scope.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">Platforms may introduce additional restrictions on which identifiers may be declared together in the same or related scopes.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">The main difference between declaration scopes and statement scopes is that names in the statement scope are bound in the order their declarations appear in it. </span><span class="sentence">It is not allowed to access a value through an identifier in the code that (syntactically) precedes the binding itself. </span><span class="sentence">On the contrary, in declaration scopes it is fully allowed, although initialization cycles may occur and need to be detected by the compiler. </span><span class="sentence">It also means that the statement scopes nested inside declaration scopes may access values declared after itself in the declaration scopes, but any values defined inside the statement scope must be accessed only after they are declared.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">Example:</span></p>
</div>
<ul>
<li><div class="paragraph">
<p><span class="sentence">In declaration scope:</span></p>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb1-1" title="1"><span class="co">// x refers to the property defined below </span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">// even if there is another property</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">// called x in outer scope or imported</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">fun</span> <span class="fu">foo</span>() { <span class="kw">return</span> x + <span class="dv">2</span>; } </a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">val</span> <span class="va">x</span> = <span class="dv">3</span>; </a></code></pre></div></li>
<li><div class="paragraph">
<p><span class="sentence">In statement scope:</span></p>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb2-1" title="1"><span class="co">// x either refers to other property </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">// defined in some outer scope or imported</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">// or it is a compile-time error</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">fun</span> <span class="fu">foo</span>() { <span class="kw">return</span> x + <span class="dv">2</span>; } </a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">val</span> <span class="va">x</span> = <span class="dv">3</span>; </a></code></pre></div></li>
</ul>
<blockquote>
<div class="paragraph">
<p><span class="sentence">Note: please note that all the above is primarily applied to declarations, because declaration scopes do not allow standalone statements to appear in them</span></p>
</div>
</blockquote>
<ul>
<li><div class="TODO">
<span class="sentence">TODO(qualified names?)</span>
</div></li>
<li><div class="TODO">
<span class="sentence">TODO(extensions?)</span>
</div></li>
<li><div class="TODO">
<span class="sentence">TODO(receivers)</span>
</div></li>
<li><div class="TODO">
<span class="sentence">TODO(rewrite expressions and statements as references to this part)</span>
</div></li>
<li><div class="TODO">
<span class="sentence">TODO(identifier lifetime &amp; such)</span>
</div></li>
</ul>
<h3 id="identifiers-and-paths">Identifiers and paths</h3>
<div class="paragraph">
<p><span class="sentence">Kotlin program operates with different <em>entities</em>, such as classes, interfaces, values, etc. An entity can be referenced using its <em>path</em>: a sequence of identifiers which references this entity in a given <a href="scopes-and-identifiers.html#scopes-and-identifiers">scope</a>.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">Kotlin supports two kinds of paths.</span></p>
</div>
<ul>
<li><span class="sentence">Simple paths <span class="math inline">\(P\)</span>, which consist of a single identifier</span></li>
<li><span class="sentence">Qualified paths <span class="math inline">\(P.m\)</span>, which consist of a path <span class="math inline">\(P\)</span> and a member identifier <span class="math inline">\(m\)</span></span></li>
</ul>
<div class="paragraph">
<p><span class="sentence">Besides identifiers which are introduced by the developer (e.g., via declaring classes or introducing variables), there are several predefined identifiers with special semantics.</span></p>
</div>
<ul>
<li><span class="sentence"><code>this</code> – an identifier which references the default receiver available in the current scope, further details are available <a href="expressions.html#this-expressions">here</a></span></li>
<li><span class="sentence"><code>this@label</code> – an identifier which references the default receiver available in the selected scope, further details are available <a href="expressions.html#this-expressions">here</a></span></li>
<li><span class="sentence"><code>super&lt;Klazz&gt;</code> – an identifier which references the supertype <code>Klazz</code> available in the current scope, further details are available <a href="expressions.html#super-forms">here</a></span></li>
<li><span class="sentence"><code>super&lt;Klazz&gt;@label</code> – an identifier which references the supertype <code>Klazz</code> available in the selected scope, further details are available <a href="expressions.html#super-forms">here</a></span></li>
</ul>
<h3 id="labels">Labels</h3>
<div class="paragraph">
<p><span class="sentence">Labels are special syntactic marks that mark certain code elements. </span><span class="sentence">Any <a href="expressions.html#annotated-and-labeled-expression">expression</a> (including <a href="expressions.html#lambda-literals">lambda expressions</a>), as well as <a href="statements.html#loop-statements">loop statements</a>, can be labeled, with label identifier assigned to the corresponding entity. </span><span class="sentence">Labels can be <strong>redeclared</strong>, meaning that the same label identifier may be reused with different parts of code (or even on the same expression/loop) several times. </span><span class="sentence">Labels are <strong>scoped</strong>, meaning that they are only available in the scope they were declared in.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">Labels are used by certain expressions, such as <a href="expressions.html#break-expression"><code>break</code></a>, <a href="expressions.html#continue-expression"><code>continue</code></a> and <a href="expressions.html#return-expressions"><code>return</code></a> to specify exactly what entity the expression corresponds to. </span><span class="sentence">Please refer to the corresponding sections for details.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">When resolving labels (i.e. determining which label current expression refers to) which have been redeclared, the <strong>closest</strong> label is chosen, i.e. the label with the innermost scope which is syntactically the closest to the point of its usage.</span></p>
</div>
<div class="TODO">
<div class="paragraph">
<p><span class="sentence">TODO: this is a stub</span></p>
</div>
</div>
<h3 id="visibility">Visibility</h3>
<div class="TODO">
<div class="paragraph">
<p><span class="sentence">TODO: remove this? </span><span class="sentence">See <a href="declarations.html#declaration-visibility">Declaration visibility</a></span></p>
</div>
</div>
<div class="paragraph">
<p><span class="sentence">Any entity declared in a declaration scope has an implicitly or explicitly defined <em>visibility</em>. </span><span class="sentence">The visibility of a declaration denotes whether the entity is <em>accessible</em> in other scopes of the program. </span><span class="sentence">If the entity declared in scope <code>A</code> is not accessible in scope <code>B</code>, it cannot be referred to in that scope, making such reference a compiler error. </span><span class="sentence">There are four basic types of visibility in kotlin: <code>public</code>, <code>private</code>, <code>internal</code> and <code>protected</code>, denoted by the corresponding visibility modifier keywords.</span></p>
</div>
<div class="paragraph">
<p><span class="sentence">Entities that have <code>public</code> visibility are generally accessible anywhere outside or inside the scope they are declared in, by using imports or qualification when necessary. </span><span class="sentence">Entities that have <code>private</code> visibility are only accessible inside the scope they are declared in or any nested scopes. </span><span class="sentence">For top-level scopes (i.e. kotlin files) it means that such entities are only accessible in the same file. </span><span class="sentence">Entities with <code>internal</code> visibility are accessible inside the same <a href="packages-and-imports.html#modules">module</a> just like if the visibility was <code>public</code> and are inaccessible (as if the visibility was <code>private</code>) in any other scope. </span><span class="sentence">Entities with <code>protected</code> visibility are only allowed in the body scope of class declarations and are used as a means of encapsulation: such entities are accessible inside any scope as if the visibility was <code>private</code>, but are also accessible by any derived classes’ scopes as if they were declared <code>private</code> in the body scope of the derived class.</span></p>
</div>
</body>
</html>
