## Control- and data-flow analysis

TODO(Unreachable code w.r.t. Nothing)

### Control flow graph

#### Expressions

```kotlin
x.f(arg1,..., argN)
```

```diagram
               +
               v
      +~~~~~~~~+~~~~~~~~+
      :                 :
      :   $2 = eval x   :
      :                 :
      +~~~~~~~~+~~~~~~~~+
               |
               v
     +~~~~~~~~~+~~~~~~~~~~+
     :                    :
     :   $1 = eval arg1   :
     :                    :
     +~~~~~~~~~+~~~~~~~~~~+
               |
               v
              ...
               +
               v
     +~~~~~~~~~+~~~~~~~~~~+
     :                    :
     :   $N = eval argN   :
     :                    :
     +~~~~~~~~~+~~~~~~~~~~+
               |
               v
+--------------+----------------+
|                               |
|   $result = $2.f($1,...,$N)   |
|                               |
+--------------+----------------+
               |
               v
```

```kotlin
f(arg1,..., argN)
```

```diagram
              +
              v
    +~~~~~~~~~+~~~~~~~~~~+
    :                    :
    :   $1 = eval arg1   :
    :                    :
    +~~~~~~~~~+~~~~~~~~~~+
              |
              v
             ...
              +
              v
    +~~~~~~~~~+~~~~~~~~~~+
    :                    :
    :   $N = eval argN   :
    :                    :
    +~~~~~~~~~+~~~~~~~~~~+
              |
              v
+-------------+--------------+
|                            |
|   $result = f($1,...,$N)   |
|                            |
+-------------+--------------+
              |
              v
```

```kotlin
if(c) t else f
```

```diagram
                   +
                   v
          +~~~~~~~~+~~~~~~~~+
          :                 :
          :   $1 = eval c   :
          :                 :
          +~~~~~+~~~~~+~~~~~+
                |     |
         +------+     +-------+
         v                    v
 +-------+-------+    +-------+--------+
 |               |    |                |
 |   assume $1   |    |   assume !$1   |
 |               |    |                |
 +-------+-------+    +-------+--------+
         |                    |
         v                    v
+~~~~~~~~+~~~~~~~~+  +~~~~~~~~+~~~~~~~~+
:                 :  :                 :
:   $2 = eval t   :  :   $2 = eval f   :
:                 :  :                 :
+~~~~~~~~+~~~~~~~~+  +~~~~~~~~+~~~~~~~~+
         |                    |
         +-------+    +-------+
                 v    v
          +------+----+------+
          |                  |
          |   $result = $2   |
          |                  |
          +---------+--------+
                    |
                    v
```

```kotlin
x || y
```

```diagram
                  +
                  v
         +~~~~~~~~+~~~~~~~~+
         :                 :
         :   $1 = eval x   :
         :                 :
         +~~~~~+~~~~~+~~~~~+
               |     |
        +------+     +-------+
        v                    v
+-------+-------+   +--------+-------+
|               |   |                |
|   assume $1   |   |   assume !$1   |
|               |   |                |
+-------+-------+   +--------+-------+
        |                    |
        v                    v
 +------+------+    +~~~~~~~~+~~~~~~~~+
 |             |    :                 :
 |   $3 = $1   |    :   $2 = eval y   :
 |             |    :                 :
 +------+------+    +~~~~~~~~+~~~~~~~~+
        |                    |
        |                    v
        |             +------+------+
        |             |             |
        |             |   $3 = $2   |
        |             |             |
        |             +------+------+
        |                    |
        |      +-------------+
        v      v
  +-----+------+-----+
  |                  |
  |   $result = $3   |
  |                  |
  +---------+--------+
            |
            v
```

```kotlin
x && y
```

```diagram
                   +
                   v
          +~~~~~~~~+~~~~~~~~+
          :                 :
          :   $1 = eval x   :
          :                 :
          +~~~~~+~~~~~+~~~~~+
                |     |
         +------+     +-------+
         v                    v
 +-------+-------+   +--------+-------+
 |               |   |                |
 |   assume $1   |   |   assume !$1   |
 |               |   |                |
 +-------+-------+   +--------+-------+
         |                    |
         v                    v
+~~~~~~~~+~~~~~~~~+    +------+------+
:                 :    |             |
:   $2 = eval y   :    |   $3 = $1   |
:                 :    |             |
+~~~~~~~~+~~~~~~~~+    +------+------+
         |                    |
         v                    |
  +------+------+             |
  |             |             |
  |   $3 = $2   |             |
  |             |             |
  +------+------+             |
         |                    |
         |      +-------------+
         v      v
   +-----+------+-----+
   |                  |
   |   $result = $3   |
   |                  |
   +---------+--------+
             |
             v
```

```kotlin
x ?: y
```

```diagram
                             +
                             v
                    +~~~~~~~~+~~~~~~~~+
                    :                 :
                    :   $1 = eval x   :
                    :                 :
                    +~~~~~+~~~~~+~~~~~+
                          |     |
              +-----------+     +------------+
              v                              v
+-------------+------------+   +-------------+------------+
|                          |   |                          |
|   assume ($1 === null)   |   |   assume ($1 !== null)   |
|                          |   |                          |
+-------------+------------+   +-------------+------------+
              |                              |
              v                              v
     +~~~~~~~~+~~~~~~~~+              +------+------+
     :                 :              |             |
     :   $2 = eval y   :              |   $3 = $1   |
     :                 :              |             |
     +~~~~~~~~+~~~~~~~~+              +------+------+
              |                              |
              v                              |
       +------+------+                       |
       |             |                       |
       |   $3 = $2   |                       |
       |             |                       |
       +------+------+                       |
              |                              |
              |      +-----------------------+
              v      v
        +-----+------+-----+
        |                  |
        |   $result = $3   |
        |                  |
        +--------+---------+
                 |
                 v
```

```kotlin
x?.y
```

```diagram
                             +
                             v
                    +~~~~~~~~+~~~~~~~~+
                    :                 :
                    :   $1 = eval x   :
                    :                 :
                    +~~~~~+~~~~~+~~~~~+
                          |     |
              +-----------+     +------------+
              v                              v
+-------------+------------+   +-------------+------------+
|                          |   |                          |
|   assume ($1 === null)   |   |   assume ($1 !== null)   |
|                          |   |                          |
+-------------+------------+   +-------------+------------+
              |                              |
              v                              v
       +------+------+               +-------+-------+
       |             |               |               |
       |   $3 = $2   |               |   $3 = $1.y   |
       |             |               |               |
       +------+------+               +-------+-------+
              |                              |
              |      +-----------------------+
              v      v
        +-----+------+-----+
        |                  |
        |   $result = $3   |
        |                  |
        +--------+---------+
                 |
                 v
```

```kotlin
try { a... } catch (e1: T1) { b1... } ... catch (eN: TN) { bN... }
```

```diagram
         +                       +                           +
         v                       v                           v
+~~~~~~~~+~~~~~~~~+    +~~~~~~~~~+~~~~~~~~+         +~~~~~~~~+~~~~~~~~~+
:                 :    :                  :         :                  :
:   $1 = eval a   :    :   $1 = eval b1   :   ...   :   $1 = eval bN   :
:                 :    :                  :         :                  :
+~~~~~~~~+~~~~~~~~+    +~~~~~~~~~+~~~~~~~~+         +~~~~~~~~+~~~~~~~~~+
         |                       |                           |
         +-----------------+     |    +----------------------+
                           v     v    v
                       +---+-----+----+---+
                       |                  |
                       |   $result = $1   |
                       |                  |
                       +---------+--------+
                                 |
                                 v
```

```kotlin
when { 
    c1 -> b1
    else -> bE
}
```

```diagram
                    +
                    v
          +~~~~~~~~~+~~~~~~~~+
          :                  :
          :   $1 = eval c1   :
          :                  :
          +~~~~~~+~~~~~+~~~~~+
                 |     |
         +-------+     +-------+
         v                     v
 +-------+-------+     +-------+--------+
 |               |     |                |
 |   assume $1   |     |   assume !$1   |
 |               |     |                |
 +-------+-------+     +-------+--------+
         |                     |
         v                     v
+~~~~~~~~+~~~~~~~~~+  +~~~~~~~~+~~~~~~~~~+
:                  :  :                  :
:   $2 = eval b1   :  :   $2 = eval bE   :
:                  :  :                  :
+~~~~~~~~+~~~~~~~~~+  +~~~~~~~+~~~~~~~~~~+
         |                    |
         +-------+     +------+
                 v     v
           +-----+-----+------+
           |                  |
           |   $result = $2   |
           |                  |
           +--------+---------+
                    |
                    v
```

```kotlin
when { 
    <entry1>
    <entries...>
    else -> bE
}
```

```kotlin
when { 
    <entry1>
    else -> {
        when {
            <entries...>
            else -> bE
        }
    }
}
```

```kotlin
a!!
```

```diagram
                             +
                             v
                    +~~~~~~~~+~~~~~~~~+
                    :                 :
                    :   $1 = eval a   :
                    :                 :
                    +~~~~~+~~~~~+~~~~~+
                          |     |
              +-----------+     +-------+
              v                         v
+-------------+------------+   +--------+--------+
|                          |   |                 |
|   assume ($1 !== null)   |   |   unreachable   |
|                          |   |                 |
+-------------+------------+   +-----------------+
              |
              v
     +--------+---------+
     |                  |
     |   $result = $1   |
     |                  |
     +--------+---------+
              |
              v
```

```kotlin
a as T
```

```diagram
                             +
                             v
                    +~~~~~~~~+~~~~~~~~+
                    :                 :
                    :   $1 = eval a   :
                    :                 :
                    +~~~~~+~~~~~+~~~~~+
                          |     |
              +-----------+     +-------+
              v                         v
+-------------+------------+   +--------+--------+
|                          |   |                 |
|     assume ($1 is T)     |   |   unreachable   |
|                          |   |                 |
+-------------+------------+   +-----------------+
              |
              v
     +--------+---------+
     |                  |
     |   $result = $1   |
     |                  |
     +--------+---------+
              |
              v
```

```kotlin
a as? T
```

```diagram
                         +
                         v
                +~~~~~~~~+~~~~~~~~+
                :                 :
                :   $1 = eval a   :
                :                 :
                +~~~~~+~~~~~+~~~~~+
                      |     |
            +---------+     +----------+
            v                          v
+-----------+----------+   +-----------+-----------+
|                      |   |                       |
|   assume ($1 is T)   |   |   assume ($1 !is T)   |
|                      |   |                       |
+-----------+----------+   +-----------+-----------+
            |                          |
            v                          v
     +------+------+           +-------+-------+
     |             |           |               |
     |   $2 = $1   |           |   $2 = null   |
     |             |           |               |
     +------+------+           +-------+-------+
            |                          |
            +---------+      +---------+
                      v      v
                +-----+------+-----+
                |                  |
                |   $result = $2   |
                |                  |
                +---------+--------+
                          |
                          v
```

```kotlin
{ a: T ... -> body... }
```

```diagram
             +                       +
             v                       v
+------------+-----------+   +~~~~~~~+~~~~~~~+
|                        |   :               :
|   $result = $literal   |   :   eval body   :
|                        |   :               :
+------------+-----------+   +~~~~~~~~~~~~~~~+
             |
             v
```

```kotlin
return
return@label
```

```diagram
         +
         v
+--------+--------+
|                 |
|   unreachable   |
|                 |
+-----------------+
```

```kotlin
return a
return@label a
throw a
```

```diagram
            +
            v
     +~~~~~~+~~~~~+
     :            :
     :   eval a   :
     :            :
     +~~~~~~+~~~~~+
            |
            v
   +--------+--------+
   |                 |
   |   unreachable   |
   |                 |
   +-----------------+
```

```kotlin
break@loop
```

```diagram
        +  
        v  
+~~~~~~~+~~~~~~~~+
:                :
:   @loop:exit   :
:                :
+~~~~~~~~~~~~~~~~+
```

```kotlin
continue@loop
```

```diagram
         +  
         v  
+~~~~~~~~+~~~~~~~~+
:                 :
:   @loop:entry   :
:                 :
+~~~~~~~~~~~~~~~~~+
```

#### Statements

```kotlin
loop@ while(c) { b... }
```

```diagram
                       +
                       v
                       |
              +--------+--------+
              |                 |
              |   @loop.entry   |
              |                 |
              +--------+--------+
                       |
+------------------+   |
|                  v   v
|             +~~~~+~~~+~~~~~~~~+
|             :                 :
|             :   $1 = eval c   :
|             :                 :
|             +~~~~~+~~~~~+~~~~~+
|                   |     |
|            +------+     +--------+
|            v                     v
|    +-------+-------+    +--------+-------+
|    |               |    |                |
|    |   assume $1   |    |   assume !$1   |
|    |               |    |                |
|    +-------+-------+    +--------+-------+
|            |                     |
|            v                     |
|      +~~~~~+~~~~~~+     +--------+--------+
|      :            :     |                 |
|      :   eval b   :     |   @loop.exit    |
|      :            :     |                 |
|      +~~~~~+~~~~~~+     +--------+--------+
|            |                     |
+------------+                     |
                                   v
```

```kotlin
loop@ do { b... } while(c)
```

```diagram
                      +
                      v
                      |
             +--------+--------+
             |                 |
             |   @loop.entry   |
             |                 |
             +--------+--------+
                      |
+-----------------+   |
|                 v   v
|              +~~+~~~+~~~~~+
|              :            :
|              :   eval b   :
|              :            :
|              +~~~~~~+~~~~~+
|                     |
|                     v
|            +~~~~~~~~+~~~~~~~~+
|            :                 :
|            :   $1 = eval c   :
|            :                 :
|            +~~~~~+~~~~~+~~~~~+
|                  |     |
|           +------+     +--------+
|           v                     v
|   +-------+-------+    +--------+-------+
|   |               |    |                |
|   |   assume $1   |    |   assume !$1   |
|   |               |    |                |
|   +-------+-------+    +--------+-------+
|           |                     |
+-----------+                     |
                         +--------+--------+
                         |                 |
                         |   @loop.exit    |
                         |                 |
                         +--------+--------+
                                  |
                                  |
                                  v
```

#### Declarations
